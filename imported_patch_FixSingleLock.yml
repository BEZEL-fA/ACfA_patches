Version: 1.2

PPU-0bc5d0e97eebf1b3bf933f2e442acb20d3a1d969:
  "FixSingleLock(for BLJM60066)":
    Games:
      "ARMORED CORE for Answer":
        BLJM60066: [ 01.35 ]
    Author: "BEZEL"
    Patch Version: 1.0
    Group: ""
    Notes: ""
    Patch:
# ===============================================================================
# lockpatch_bljm60066
# ===============================================================================
      # Hook (0x00933060 -> ENT933060 (0x011F8E50))
      - [ be32, 0x00933060, 0x488C5DF0 ] # b ENT933060 (0x011F8E50)
      # Return (To 0x00933064)
      - [ be32, 0x011F8E78, 0x4B73A1EC ] # b ENT933060_ret
      #
      # Hook (0x0093307C -> ENT93307c (0x011F8E7C))
      - [ be32, 0x0093307C, 0x488C5E00 ] # b ENT93307c (0x011F8E7C)
      # Return (To 0x00933080)
      - [ be32, 0x011F8EA4, 0x4B73A1DC ] # b ENT93307c_ret
      #
      # Hook (0x00933410 -> ENT933410 (0x011F8ECC))
      - [ be32, 0x00933410, 0x488C5ABC ] # b ENT933410 (0x011F8ECC)
      # Return (To 0x00933414)
      - [ be32, 0x011F8EF4, 0x4B73A520 ] # b ENT933410_ret
      #
      # Hook (0x009334A8 -> ENT9334a8 (0x011F8EF8))
      - [ be32, 0x009334A8, 0x488C5A50 ] # b ENT9334a8 (0x011F8EF8)
      # Return (To 0x009334AC)
      - [ be32, 0x011F8F20, 0x4B73A58C ] # b ENT9334a8_ret
      #
      # Hook (0x00979B00 -> ENT979b00 (0x011F8F3C))
      - [ be32, 0x00979B00, 0x4887F43C ] # b ENT979b00 (0x011F8F3C)
      # Return (To 0x00979B04)
      - [ be32, 0x011F8F64, 0x4B780BA0 ] # b ENT979b00_ret
      #
      # Hook (0x009794EC -> ENT9794ec (0x011F8F80))
      - [ be32, 0x009794EC, 0x4887FA94 ] # b ENT9794ec (0x011F8F80)
      # Return (To 0x009794F0)
      - [ be32, 0x011F8FA8, 0x4B780548 ] # b ENT9794ec_ret
      #
      # Hook (0x00975084 -> ENT975084 (0x011F900C))
      - [ be32, 0x00975084, 0x48883F88 ] # b ENT975084 (0x011F900C)
      # Return (To 0x00975088)
      - [ be32, 0x011F9038, 0x4B77C050 ] # b ENT975084_ret
      #
      # Hook (0x0097514C -> ENT97514c (0x011F903C))
      - [ be32, 0x0097514C, 0x48883EF0 ] # b ENT97514c (0x011F903C)
      # Return (To 0x00975150)
      - [ be32, 0x011F9068, 0x4B77C0E8 ] # b ENT97514c_ret
      #
      # Payload (Start: 0x011F8E50)
      # ENT933060: #cr7 ok
      - [ be32, 0x011F8E50, 0xF821FC01 ] # stdu r1, -0x400(r1)
      - [ be32, 0x011F8E54, 0xF8010008 ] # std r0, 0x8(r1) #r0
      - [ be32, 0x011F8E58, 0x7C0802A6 ] # mflr r0
      - [ be32, 0x011F8E5C, 0xF8010010 ] # std r0, 0x10(r1) #lr
      - [ be32, 0x011F8E60, 0x48000049 ] # bl FF_MAIN
      - [ be32, 0x011F8E64, 0xE8010010 ] # ld r0, 0x10(r1)
      - [ be32, 0x011F8E68, 0x7C0803A6 ] # mtlr r0
      - [ be32, 0x011F8E6C, 0xE8010008 ] # ld r0, 0x8(r1)
      - [ be32, 0x011F8E70, 0x38210400 ] # addi r1, r1, 0x400
      - [ be32, 0x011F8E74, 0x7F930000 ] # cmpw cr7, r19, r0 #origin
      # ENT93307c: #cr7 ok
      - [ be32, 0x011F8E7C, 0xF821FC01 ] # stdu r1, -0x400(r1)
      - [ be32, 0x011F8E80, 0xF8010008 ] # std r0, 0x8(r1) #r0
      - [ be32, 0x011F8E84, 0x7C0802A6 ] # mflr r0
      - [ be32, 0x011F8E88, 0xF8010010 ] # std r0, 0x10(r1) #lr
      - [ be32, 0x011F8E8C, 0x4800001D ] # bl FF_MAIN
      - [ be32, 0x011F8E90, 0xE8010010 ] # ld r0, 0x10(r1)
      - [ be32, 0x011F8E94, 0x7C0803A6 ] # mtlr r0
      - [ be32, 0x011F8E98, 0xE8010008 ] # ld r0, 0x8(r1)
      - [ be32, 0x011F8E9C, 0x38210400 ] # addi r1, r1, 0x400
      - [ be32, 0x011F8EA0, 0x7F930000 ] # cmpw cr7, r19, r0 #origin
      # FF_MAIN:
      - [ be32, 0x011F8EA8, 0xE8010008 ] # ld r0, 0x8(r1)
      - [ be32, 0x011F8EAC, 0x2F8000FF ] # cmpwi cr7, r0, 0xff
      - [ be32, 0x011F8EB0, 0x409E0018 ] # bne cr7, FF_END
      - [ be32, 0x011F8EB4, 0xF8810018 ] # std r4, 0x18(r1)
      - [ be32, 0x011F8EB8, 0x3C80011F ] # lis r4, 0x11f
      - [ be32, 0x011F8EBC, 0x6084FFB4 ] # ori r4, r4, 0xffb4 #0x11fffb4
      - [ be32, 0x011F8EC0, 0x90040000 ] # stw r0, 0x0(r4)
      - [ be32, 0x011F8EC4, 0xE8810018 ] # ld r4, 0x18(r1)
      # FF_END:
      - [ be32, 0x011F8EC8, 0x4E800020 ] # blr
      # ENT933410:
      - [ be32, 0x011F8ECC, 0xF821FC01 ] # stdu r1, -0x400(r1)
      - [ be32, 0x011F8ED0, 0xF8010008 ] # std r0, 0x8(r1) #r0
      - [ be32, 0x011F8ED4, 0x7C0802A6 ] # mflr r0
      - [ be32, 0x011F8ED8, 0xF8010010 ] # std r0, 0x10(r1) #lr
      - [ be32, 0x011F8EDC, 0x48000049 ] # bl SAV_MAIN
      - [ be32, 0x011F8EE0, 0xE8010010 ] # ld r0, 0x10(r1)
      - [ be32, 0x011F8EE4, 0x7C0803A6 ] # mtlr r0
      - [ be32, 0x011F8EE8, 0xE8010008 ] # ld r0, 0x8(r1)
      - [ be32, 0x011F8EEC, 0x38210400 ] # addi r1, r1, 0x400
      - [ be32, 0x011F8EF0, 0x93BC0000 ] # stw r29, 0x0(r28) #origin
      # ENT9334a8:
      - [ be32, 0x011F8EF8, 0xF821FC01 ] # stdu r1, -0x400(r1)
      - [ be32, 0x011F8EFC, 0xF8010008 ] # std r0, 0x8(r1) #r0
      - [ be32, 0x011F8F00, 0x7C0802A6 ] # mflr r0
      - [ be32, 0x011F8F04, 0xF8010010 ] # std r0, 0x10(r1) #lr
      - [ be32, 0x011F8F08, 0x4800001D ] # bl SAV_MAIN
      - [ be32, 0x011F8F0C, 0xE8010010 ] # ld r0, 0x10(r1)
      - [ be32, 0x011F8F10, 0x7C0803A6 ] # mtlr r0
      - [ be32, 0x011F8F14, 0xE8010008 ] # ld r0, 0x8(r1)
      - [ be32, 0x011F8F18, 0x38210400 ] # addi r1, r1, 0x400
      - [ be32, 0x011F8F1C, 0x93BC0000 ] # stw r29, 0x0(r28) #origin
      # SAV_MAIN:
      - [ be32, 0x011F8F24, 0xF8810018 ] # std r4, 0x18(r1)
      - [ be32, 0x011F8F28, 0x3C80011F ] # lis r4, 0x11f
      - [ be32, 0x011F8F2C, 0x6084FFB8 ] # ori r4, r4, 0xffb8 #0x11fffb8
      - [ be32, 0x011F8F30, 0x93A40000 ] # stw r29, 0x0(r4)
      - [ be32, 0x011F8F34, 0xE8810018 ] # ld r4, 0x18(r1)
      - [ be32, 0x011F8F38, 0x4E800020 ] # blr
      # ENT979b00:
      - [ be32, 0x011F8F3C, 0xF821FC01 ] # stdu r1, -0x400(r1)
      - [ be32, 0x011F8F40, 0xF8010008 ] # std r0, 0x8(r1) #r0
      - [ be32, 0x011F8F44, 0x7C0802A6 ] # mflr r0
      - [ be32, 0x011F8F48, 0xF8010010 ] # std r0, 0x10(r1) #lr
      - [ be32, 0x011F8F4C, 0x4800001D ] # bl RES_MAIN
      - [ be32, 0x011F8F50, 0xE8010010 ] # ld r0, 0x10(r1)
      - [ be32, 0x011F8F54, 0x7C0803A6 ] # mtlr r0
      - [ be32, 0x011F8F58, 0xE8010008 ] # ld r0, 0x8(r1)
      - [ be32, 0x011F8F5C, 0x38210400 ] # addi r1, r1, 0x400
      - [ be32, 0x011F8F60, 0xE8410028 ] # ld r2, 0x28(r1) #origin
      # RES_MAIN:
      - [ be32, 0x011F8F68, 0x38000000 ] # li r0, 0x0
      - [ be32, 0x011F8F6C, 0x3C40011F ] # lis r2, 0x11f
      - [ be32, 0x011F8F70, 0x6042FFB4 ] # ori r2, r2, 0xffb4 #0x11fffb4
      - [ be32, 0x011F8F74, 0x90020000 ] # stw r0, 0x0(r2)
      - [ be32, 0x011F8F78, 0x90020004 ] # stw r0, 0x4(r2)
      - [ be32, 0x011F8F7C, 0x4E800020 ] # blr
      # ENT9794ec: #cr7 r24 r23 ok
      - [ be32, 0x011F8F80, 0xF821FC01 ] # stdu r1, -0x400(r1)
      - [ be32, 0x011F8F84, 0xF8010008 ] # std r0, 0x8(r1) #r0
      - [ be32, 0x011F8F88, 0x7C0802A6 ] # mflr r0
      - [ be32, 0x011F8F8C, 0xF8010010 ] # std r0, 0x10(r1) #lr
      - [ be32, 0x011F8F90, 0x4800001D ] # bl BUF_MAIN
      - [ be32, 0x011F8F94, 0xE8010010 ] # ld r0, 0x10(r1)
      - [ be32, 0x011F8F98, 0x7C0803A6 ] # mtlr r0
      - [ be32, 0x011F8F9C, 0xE8010008 ] # ld r0, 0x8(r1)
      - [ be32, 0x011F8FA0, 0x38210400 ] # addi r1, r1, 0x400
      - [ be32, 0x011F8FA4, 0x8B1D0018 ] # lbz r24, 0x18(r29) #origin
      # BUF_MAIN:
      - [ be32, 0x011F8FAC, 0xF8810018 ] # std r4, 0x18(r1)
      - [ be32, 0x011F8FB0, 0x3F00011F ] # lis r24, 0x11f
      - [ be32, 0x011F8FB4, 0x6318FFC0 ] # ori r24, r24, 0xffc0 #0x11fffc0 base address
      - [ be32, 0x011F8FB8, 0x3AE00000 ] # li r23, 0x0 #counter
      # BUF_FIND:
      - [ be32, 0x011F8FBC, 0x7C98BA14 ] # add r4, r24, r23 #calculate address to find
      - [ be32, 0x011F8FC0, 0x80040000 ] # lwz r0, 0x0(r4)
      - [ be32, 0x011F8FC4, 0x7F80D800 ] # cmpw cr7, r0, r27
      - [ be32, 0x011F8FC8, 0x419E0024 ] # beq cr7, BUF_SAVE
      - [ be32, 0x011F8FCC, 0x3AF70004 ] # addi r23, r23, 0x4
      - [ be32, 0x011F8FD0, 0x2F970020 ] # cmpwi cr7, r23, 0x20
      - [ be32, 0x011F8FD4, 0x419CFFE8 ] # blt cr7, BUF_FIND
      - [ be32, 0x011F8FD8, 0x82F8FFFC ] # lwz r23, -0x4(r24) #index first, the value is zero
      - [ be32, 0x011F8FDC, 0x7C98BA14 ] # add r4, r24, r23 #new address
      - [ be32, 0x011F8FE0, 0x3AF70004 ] # addi r23, r23, 0x4
      - [ be32, 0x011F8FE4, 0x56F706FE ] # rlwinm r23, r23, 0, 27, 31 #bitmask
      - [ be32, 0x011F8FE8, 0x92F8FFFC ] # stw r23, -0x4(r24) #save new value of index
      # BUF_SAVE:
      - [ be32, 0x011F8FEC, 0x93640000 ] # stw r27, 0x0(r4) #save memory address
      - [ be32, 0x011F8FF0, 0x82F8FFF4 ] # lwz r23, -0xc(r24) #load flag of single lock problem
      - [ be32, 0x011F8FF4, 0x2F9700FF ] # cmpwi cr7, r23, 0xff
      - [ be32, 0x011F8FF8, 0x419E000C ] # beq cr7, BUF_END
      - [ be32, 0x011F8FFC, 0x82F8FFF8 ] # lwz r23, -0x8(r24) #load enemy pointer
      - [ be32, 0x011F9000, 0x92E40020 ] # stw r23, 0x20(r4) #save enemy pointer
      # BUF_END:
      - [ be32, 0x011F9004, 0xE8810018 ] # ld r4, 0x18(r1)
      - [ be32, 0x011F9008, 0x4E800020 ] # blr
      # ENT975084: #cr7 ok
      - [ be32, 0x011F900C, 0xF821FC01 ] # stdu r1, -0x400(r1)
      - [ be32, 0x011F9010, 0x7C0802A6 ] # mflr r0
      - [ be32, 0x011F9014, 0xF8010008 ] # std r0, 0x8(r1) #lr
      - [ be32, 0x011F9018, 0xF8810010 ] # std r4, 0x10(r1) #r4
      - [ be32, 0x011F901C, 0x38800001 ] # li r4, 0x1 #flag
      - [ be32, 0x011F9020, 0x4800004D ] # bl LD_MAIN
      - [ be32, 0x011F9024, 0xE8810010 ] # ld r4, 0x10(r1)
      - [ be32, 0x011F9028, 0xE8010008 ] # ld r0, 0x8(r1)
      - [ be32, 0x011F902C, 0x7C0803A6 ] # mtlr r0
      - [ be32, 0x011F9030, 0x80010030 ] # lwz r0, 0x30(r1) #alternative of origin
      - [ be32, 0x011F9034, 0x38210400 ] # addi r1, r1, 0x400
      # ENT97514c: #cr7 ok
      - [ be32, 0x011F903C, 0xF821FC01 ] # stdu r1, -0x400(r1)
      - [ be32, 0x011F9040, 0x7C0802A6 ] # mflr r0
      - [ be32, 0x011F9044, 0xF8010008 ] # std r0, 0x8(r1) #lr
      - [ be32, 0x011F9048, 0xF8810010 ] # std r4, 0x10(r1) #r4
      - [ be32, 0x011F904C, 0x38800002 ] # li r4, 0x2 #flag
      - [ be32, 0x011F9050, 0x4800001D ] # bl LD_MAIN
      - [ be32, 0x011F9054, 0xE8810010 ] # ld r4, 0x10(r1)
      - [ be32, 0x011F9058, 0xE8010008 ] # ld r0, 0x8(r1)
      - [ be32, 0x011F905C, 0x7C0803A6 ] # mtlr r0
      - [ be32, 0x011F9060, 0x80010030 ] # lwz r0, 0x30(r1) #alternative of origin
      - [ be32, 0x011F9064, 0x38210400 ] # addi r1, r1, 0x400
      # LD_MAIN:
      - [ be32, 0x011F906C, 0xF8A10018 ] # std r5, 0x18(r1)
      - [ be32, 0x011F9070, 0xF8C10020 ] # std r6, 0x20(r1)
      - [ be32, 0x011F9074, 0xF8E10028 ] # std r7, 0x28(r1)
      - [ be32, 0x011F9078, 0x3CA0011F ] # lis r5, 0x11f
      - [ be32, 0x011F907C, 0x60A5FFC0 ] # ori r5, r5, 0xffc0 #0x11fffc0 base address
      - [ be32, 0x011F9080, 0x38C00000 ] # li r6, 0 #counter
      # LD_FIND:
      - [ be32, 0x011F9084, 0x7CE53214 ] # add r7, r5, r6 #calculate address
      - [ be32, 0x011F9088, 0x80E70000 ] # lwz r7, 0x0(r7) #load memory address
      - [ be32, 0x011F908C, 0x2F840001 ] # cmpwi cr7, r4, 0x1
      - [ be32, 0x011F9090, 0x419E0008 ] # beq cr7, LD_SUB1
      - [ be32, 0x011F9094, 0x4800000C ] # b LD_SUB2
      # LD_SUB1:
      - [ be32, 0x011F9098, 0x38E7FFF0 ] # addi r7, r7, -0x10 #fix address
      - [ be32, 0x011F909C, 0x48000008 ] # b LD_MAIN2
      # LD_SUB2:
      - [ be32, 0x011F90A0, 0x38E70010 ] # addi r7, r7, 0x10 #fix address
      # LD_MAIN2:
      - [ be32, 0x011F90A4, 0x7F87F800 ] # cmpw cr7, r7, r31
      - [ be32, 0x011F90A8, 0x419E0018 ] # beq cr7, LD_EQAL
      - [ be32, 0x011F90AC, 0x38C60004 ] # addi r6, r6, 0x4
      - [ be32, 0x011F90B0, 0x2F860020 ] # cmpwi cr7, r6, 0x20
      - [ be32, 0x011F90B4, 0x419CFFD0 ] # blt cr7, LD_FIND
      - [ be32, 0x011F90B8, 0x801F0010 ] # lwz r0, 0x10(r31) #origin (backup)
      - [ be32, 0x011F90BC, 0x4800000C ] # b LD_END
      # LD_EQAL:
      - [ be32, 0x011F90C0, 0x7CE53214 ] # add r7, r5, r6 #calculate address
      - [ be32, 0x011F90C4, 0x80070020 ] # lwz r0, 0x20(r7) #load enemy pointer
      # LD_END:
      - [ be32, 0x011F90C8, 0x90010030 ] # stw r0, 0x30(r1) #save pointer
      - [ be32, 0x011F90CC, 0xE8E10028 ] # ld r7, 0x28(r1)
      - [ be32, 0x011F90D0, 0xE8C10020 ] # ld r6, 0x20(r1)
      - [ be32, 0x011F90D4, 0xE8A10018 ] # ld r5, 0x18(r1)
      - [ be32, 0x011F90D8, 0x4E800020 ] # blr
      #